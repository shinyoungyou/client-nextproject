{"ast":null,"code":"var _jsxFileName = \"/Users/home/Desktop/new-projects/client-nextproject/components/CommentListItem.tsx\";\nvar __jsx = React.createElement;\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { editComment, removeComment } from \"../store/thunks/post\";\nimport React, { useState, useEffect } from \"react\";\nimport MoreMenu from './MoreMenu';\nimport { EditContent } from '../styles/styled-components';\nimport { Avatar, Divider, IconButton, ListItem, ListItemAvatar, ListItemText, Tooltip } from \"@mui/material\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nconst CommentListItem = ({\n  comment\n}) => {\n  const {\n    editCommentDone,\n    editCommentLoading,\n    removeCommentLoading\n  } = useSelector(state => state.post);\n  const {\n    my\n  } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const {\n    0: editStatus,\n    1: setEditStatus\n  } = useState(\"beforeEdit\");\n  const {\n    0: content,\n    1: setContent\n  } = useState(comment.content);\n  const {\n    0: anchorEl,\n    1: setAnchorEl\n  } = useState(null);\n  const open = Boolean(anchorEl);\n  useEffect(() => {\n    if (editCommentDone) {\n      setEditStatus(\"beforeEdit\");\n    }\n  }, [editCommentDone]);\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleContentChange = e => {\n    setContent(e.target.value);\n  };\n  const handleEditComment = comment => {\n    if (editStatus === \"beforeEdit\") {\n      setEditStatus(\"editing\");\n    } else if (editStatus === \"editing\") {\n      dispatch(editComment({\n        postId: comment.PostId,\n        id: comment.id,\n        content\n      }));\n      setEditStatus(\"pending\");\n    }\n  };\n  const handleDeleteComment = comment => {\n    dispatch(removeComment({\n      postId: comment.PostId,\n      id: comment.id\n    }));\n  };\n  return __jsx(React.Fragment, null, __jsx(ListItem, {\n    key: comment.id,\n    secondaryAction: my && __jsx(React.Fragment, null, __jsx(Tooltip, {\n      title: \"More\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 15\n      }\n    }, __jsx(IconButton, {\n      \"aria-label\": \"more\",\n      id: \"long-button\",\n      \"aria-controls\": open ? 'long-menu' : undefined,\n      \"aria-expanded\": open ? 'true' : undefined,\n      \"aria-haspopup\": \"true\",\n      onClick: handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, __jsx(MoreVertIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }))), __jsx(MoreMenu, {\n      item: comment,\n      anchorEl: anchorEl,\n      setAnchorEl: setAnchorEl,\n      open: open,\n      editStatus: editStatus,\n      setEditStatus: setEditStatus,\n      handleEdit: () => handleEditComment(comment),\n      editLoading: editCommentLoading,\n      handleDelete: () => handleDeleteComment(comment),\n      removeLoading: removeCommentLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }\n    })),\n    alignItems: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, __jsx(ListItemAvatar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, __jsx(Avatar, {\n    alt: comment.User.username,\n    src: \"/static/images/avatar/1.jpg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  })), __jsx(ListItemText, {\n    sx: {\n      m: 1\n    },\n    primary: comment.User.username,\n    secondary: editStatus === \"editing\" ? __jsx(EditContent, {\n      onChange: handleContentChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 19\n      }\n    }, content) : comment.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  })), __jsx(Divider, {\n    variant: \"inset\",\n    component: \"li\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }));\n};\nexport default CommentListItem;","map":{"version":3,"names":["useDispatch","useSelector","editComment","removeComment","React","useState","useEffect","MoreMenu","EditContent","Avatar","Divider","IconButton","ListItem","ListItemAvatar","ListItemText","Tooltip","MoreVertIcon","CommentListItem","comment","editCommentDone","editCommentLoading","removeCommentLoading","state","post","my","user","dispatch","editStatus","setEditStatus","content","setContent","anchorEl","setAnchorEl","open","Boolean","handleClick","event","currentTarget","handleContentChange","e","target","value","handleEditComment","postId","PostId","id","handleDeleteComment","undefined","User","username","m"],"sources":["/Users/home/Desktop/new-projects/client-nextproject/components/CommentListItem.tsx"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\nimport { editComment, removeComment } from \"../store/thunks/post\";\nimport React, { useState, MouseEvent, BaseSyntheticEvent, useEffect } from \"react\";\nimport RootState from \"../store/state-types\";\nimport { Comment } from '../store/state-types/post';\n\nimport MoreMenu from './MoreMenu';\nimport { EditContent } from '../styles/styled-components'\n\nimport {\n  Avatar,\n  Divider,\n  IconButton,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Tooltip\n} from \"@mui/material\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\n\ninterface CommentListItemProps {\n  comment: Comment\n}\n\nconst CommentListItem: React.FC<CommentListItemProps> = ({ comment }) => {\n  const { editCommentDone, editCommentLoading, removeCommentLoading } = useSelector((state: RootState) => state.post);\n  const { my } = useSelector((state: RootState) => state.user);\n  const dispatch = useDispatch();\n\n    const [editStatus, setEditStatus] = useState(\"beforeEdit\");\n    const [content, setContent] = useState(comment.content);\n\n  const [anchorEl, setAnchorEl] = useState<BaseSyntheticEvent[\"currentTarget\"]>(null);\n\n  const open = Boolean(anchorEl);\n\n    useEffect(()=>{\n      if(editCommentDone){\n        setEditStatus(\"beforeEdit\");\n      }\n    }, [editCommentDone])\n\n  const handleClick = (event: MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setContent(e.target.value);\n  }\n\n    const handleEditComment = (comment: Comment) => {\n      if (editStatus === \"beforeEdit\"){\n        setEditStatus(\"editing\");\n      } else if (editStatus === \"editing\"){\n        dispatch(editComment({\n          postId: comment.PostId,\n          id: comment.id,\n          content\n        }));\n        setEditStatus(\"pending\");\n      }\n    }\n\n  const handleDeleteComment = (comment: Comment) => {\n    dispatch(removeComment({ postId: comment.PostId as number, id: comment.id }));\n  }\n\n  return (\n      <>\n        <ListItem key={comment.id}\n          secondaryAction={\n            my && <>\n              <Tooltip title=\"More\">\n                <IconButton\n                  aria-label=\"more\"\n                  id=\"long-button\"\n                  aria-controls={open ? 'long-menu' : undefined}\n                  aria-expanded={open ? 'true' : undefined}\n                  aria-haspopup=\"true\"\n                  onClick={handleClick}\n                >\n                  <MoreVertIcon/>\n                </IconButton>\n              </Tooltip>\n              <MoreMenu\n                item={comment}\n                anchorEl={anchorEl}\n                setAnchorEl={setAnchorEl}\n                open={open}\n                editStatus={editStatus}\n                setEditStatus={setEditStatus}\n                handleEdit={()=>handleEditComment(comment)}\n                editLoading={editCommentLoading}\n                handleDelete={()=>handleDeleteComment(comment)}\n                removeLoading={removeCommentLoading}\n              />\n            </>\n        } alignItems=\"flex-start\">\n          <ListItemAvatar>\n            <Avatar alt={comment.User.username} src=\"/static/images/avatar/1.jpg\"/>\n          </ListItemAvatar>\n          <ListItemText\n              sx={{ m: 1 }}\n              primary={comment.User.username}\n              secondary={editStatus === \"editing\"\n                  ?\n                  <EditContent\n                      onChange={handleContentChange}\n                  >\n                      {content}\n                  </EditContent>\n                  : comment.content}\n          />\n        </ListItem>\n        <Divider variant=\"inset\" component=\"li\"/>\n      </>\n  )\n}\n\nexport default CommentListItem;"],"mappings":"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"},"metadata":{},"sourceType":"module"}