{"ast":null,"code":"var __jsx = React.createElement;\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { retweet, undoRetweet } from \"../store/thunks/post\";\nimport React from \"react\";\nimport { StyledMenu } from \"../styles\";\nimport { MenuItem } from \"@mui/material\";\nimport RepeatIcon from '@mui/icons-material/Repeat';\nimport EditIcon from \"@mui/icons-material/Edit\";\nimport ListItemDecorator from \"@mui/joy/ListItemDecorator\";\nimport { LoadingButton } from \"@mui/lab\";\nvar RetweetMenu = function RetweetMenu(_ref) {\n  var post = _ref.post,\n    anchorEl = _ref.anchorEl,\n    setAnchorEl = _ref.setAnchorEl,\n    open = _ref.open;\n  var _useSelector = useSelector(function (state) {\n      return state.post;\n    }),\n    mainPosts = _useSelector.mainPosts,\n    retweetLoading = _useSelector.retweetLoading,\n    undoRetweetLoading = _useSelector.undoRetweetLoading;\n  var _useSelector2 = useSelector(function (state) {\n      return state.user;\n    }),\n    my = _useSelector2.my;\n  var dispatch = useDispatch();\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n  var isRetweetedByMe = post.RetweetId && post.UserId == (my === null || my === void 0 ? void 0 : my.id) || mainPosts.find(function (mainPost) {\n    return post.id == mainPost.RetweetId && mainPost.UserId == (my === null || my === void 0 ? void 0 : my.id);\n  });\n  var isRetweetedByOthers = post.RetweetId && post.UserId == (my === null || my === void 0 ? void 0 : my.id) || mainPosts.find(function (mainPost) {\n    return post.id == mainPost.RetweetId && mainPost.UserId != (my === null || my === void 0 ? void 0 : my.id);\n  });\n  var isOriginalPost = mainPosts.find(function (mainPost) {\n    return post.id == mainPost.RetweetId && mainPost.UserId;\n  });\n  var retweetingPostId = isOriginalPost === null || isOriginalPost === void 0 ? void 0 : isOriginalPost.id; // the id of the post which is retweeting the original one.\n\n  var handleRetweet = function handleRetweet(post) {\n    if (my === null) return alert('로그인이 필요합니다.');\n    if (isRetweetedByMe) {\n      dispatch(undoRetweet({\n        id: isOriginalPost ? retweetingPostId : post.id\n      }));\n    } else if (isRetweetedByOthers) {\n      dispatch(retweet({\n        id: isOriginalPost ? post.id : post.RetweetId\n      }));\n    } else {\n      dispatch(retweet({\n        id: post.id\n      }));\n    }\n  };\n  return __jsx(StyledMenu, {\n    id: \"demo-customized-menu\",\n    MenuListProps: {\n      'aria-labelledby': 'demo-customized-button'\n    },\n    anchorEl: anchorEl,\n    open: open,\n    onClose: handleClose\n  }, __jsx(MenuItem, {\n    key: isRetweetedByMe ? \"Undo Retweet\" : \"Retweet\",\n    onClick: function onClick() {\n      return handleRetweet(post);\n    },\n    disableRipple: true\n  }, __jsx(LoadingButton, {\n    loading: isRetweetedByMe ? undoRetweetLoading : retweetLoading,\n    sx: {\n      p: 0,\n      color: \"inherit\",\n      textTransform: \"inherit\",\n      fontSize: \"inherit\"\n    }\n  }, __jsx(ListItemDecorator, {\n    sx: {\n      color: 'inherit'\n    }\n  }, __jsx(RepeatIcon, null)), ' ', isRetweetedByMe ? \"Undo Retweet\" : \"Retweet\")), __jsx(MenuItem, {\n    key: \"Quote Tweet\",\n    onClick: handleClose,\n    disableRipple: true\n  }, __jsx(EditIcon, null), \"Quote Tweet\"));\n};\nexport default RetweetMenu;","map":null,"metadata":{},"sourceType":"module"}